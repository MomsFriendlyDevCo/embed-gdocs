var u=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var p=(n,r)=>{for(var e in r)u(n,e,{get:r[e],enumerable:!0})},x=(n,r,e,l)=>{if(r&&typeof r=="object"||typeof r=="function")for(let t of d(r))!h.call(n,t)&&t!==e&&u(n,t,{get:()=>r[t],enumerable:!(l=c(r,t))||l.enumerable});return n};var m=n=>x(u({},"__esModule",{value:!0}),n);var g={};p(g,{default:()=>s});module.exports=m(g);function f(n,r){let e={keepStyle:!0,fixContentTrim:!0,fixWidth:!0,fixTableWidth:!0,fixPadding:!0,fixLinkTargets:!0,fixLinkShorten:!0,fixImageTitleAsLink:!0,createElement(i){return document.createElement("div")},onLoad:i=>i,onMount:i=>null,...r},l=[],t=e.createElement("div");t.innerHTML=n;let o=e.fixContentTrim?t.querySelector(".doc-content"):t;if(e.keepStyle){let i=t.querySelector('style[type="text/css"]');o.prepend(i)}if((e.fixWidth||e.fixPadding)&&o.setAttribute("style",[e.fixWidth&&"max-width: none",e.fixPadding&&"padding: 0 20px"].filter(Boolean).join(`;
`)),e.fixTableWidth&&l.push(`${e.selector} table { max-width: none !important; padding: 1.5rem 0 }`,`${e.selector} table td:last-child { width: auto !important }`),e.fixParaMargins&&l.push(`${e.selector} p { margin-bottom: 1rem }`),(e.fixLinkTargets||e.fixLinkShorten)&&Array.from(o.querySelectorAll("a")).filter(i=>/^https?:\/\//.test(i.getAttribute("href"))).forEach(i=>{e.fixLinkTargets&&i.setAttribute("target","_blank"),e.fixLinkShorten&&i.setAttribute("href",i.getAttribute("href").replace(/^https:\/\/www\.google\.com\/url\?q=(.*?)&.*$/,"$1").replace(/^https:\/\/www\.google\.com\/url\?q=/,"").replace(/^(.+)$/,a=>unescape(a)))}),e.fixImageTitleAsLink&&Array.from(o.querySelectorAll("img[title]")).filter(i=>/^https?:\/\//.test(i.getAttribute("title"))).forEach(i=>{let a=e.createElement("a");a.setAttribute("href",i.getAttribute("title")),e.fixLinkTargets&&a.setAttribute("target","_blank"),i.replaceWith(a),a.replaceChildren(i)}),l.length>0){let i=e.createElement("style");i.setAttribute("type","text/css"),i.innerHTML=l.join(`
`),o.prepend(i)}return e.onMount(o),o}function s(n){let r={selector:null,url:null,urlOptions:{cache:"default",headers:{Accept:"text/html"}},keepStyle:!0,fixContentTrim:!0,fixWidth:!0,fixTableWidth:!0,fixPadding:!0,fixLinkTargets:!0,fixLinkShorten:!0,fixImageTitleAsLink:!0,onLoad:t=>t,onMount:t=>null,...n},e=(t,o)=>t.setHTML?t.setHTML(o):t.innerHTML=o;if(!r.selector)throw new Error("Selector must be specified");if(!r.url)throw new Error("URL must be specified");let l=typeof r.selector=="string"?document.querySelector(r.selector):r.selector;if(!l)throw new Error(`Cannot find selector "${r.selector} to embed GDoc`);return fetch(r.url,r.urlOptions).then(t=>t.text()).then(t=>r.onLoad(t)).then(t=>f(t,n)).then(t=>l.replaceChildren(t))}
//# sourceMappingURL=embed-gdocs.cjs.map
