var a=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var m=(n,i)=>{for(var e in i)a(n,e,{get:i[e],enumerable:!0})},p=(n,i,e,o)=>{if(i&&typeof i=="object"||typeof i=="function")for(let t of d(i))!h.call(n,t)&&t!==e&&a(n,t,{get:()=>i[t],enumerable:!(o=u(i,t))||o.enumerable});return n};var x=n=>p(a({},"__esModule",{value:!0}),n);var g={};m(g,{default:()=>f});module.exports=x(g);function c(n,i){let e={id:"embed-"+Math.floor(9999999*Math.random()),cssSelector:null,keepStyle:!0,fixContentTrim:!0,fixWidth:!0,fixTableWidth:!0,fixPadding:!0,fixLinkTargets:!0,fixLinkShorten:!0,fixImageTitleAsLink:!0,createElement(r){return document.createElement(r)},onLoad:r=>r,onMount:r=>null,...i};e.cssSelector||(e.cssSelector="#"+e.id);let o=[],t=e.createElement("div");t.innerHTML=n;let l=e.fixContentTrim&&t.querySelector(".doc-content")||t;if(e.keepStyle){let r=t.querySelector('style[type="text/css"]');l.prepend(r)}if((e.fixWidth||e.fixPadding)&&l.setAttribute("style",[e.fixWidth&&"max-width: none",e.fixPadding&&"padding: 0 20px"].filter(Boolean).join(`;
`)),e.fixTableWidth&&o.push(`${e.cssSelector} table { max-width: none !important; padding: 1.5rem 0 }`,`${e.cssSelector} table td:last-child { width: auto !important }`),e.fixParaMargins&&o.push(`${e.cssSelector} p { margin-bottom: 1rem }`),(e.fixLinkTargets||e.fixLinkShorten)&&Array.from(l.querySelectorAll("a")).filter(r=>/^https?:\/\//.test(r.getAttribute("href"))).forEach(r=>{e.fixLinkTargets&&r.setAttribute("target","_blank"),e.fixLinkShorten&&r.setAttribute("href",r.getAttribute("href").replace(/^https:\/\/www\.google\.com\/url\?q=(.*?)&.*$/,"$1").replace(/^https:\/\/www\.google\.com\/url\?q=/,"").replace(/^(.+)$/,s=>unescape(s)))}),e.fixImageTitleAsLink&&Array.from(l.querySelectorAll("img[title]")).filter(r=>/^https?:\/\//.test(r.getAttribute("title"))).forEach(r=>{let s=e.createElement("a");s.setAttribute("href",r.getAttribute("title")),e.fixLinkTargets&&s.setAttribute("target","_blank"),r.replaceWith(s),s.replaceChildren(r)}),o.length>0){let r=e.createElement("style");r.setAttribute("type","text/css"),r.innerHTML=`/* Impored Styles */
`+o.join(`
`),l.prepend(r)}return e.onMount(l),l}function f(n){let i={selector:null,url:null,urlOptions:{cache:"default",headers:{Accept:"text/html"}},fetcher(t){return fetch(t.url,t.options).then(l=>l.text())},keepStyle:!0,fixContentTrim:!0,fixWidth:!0,fixTableWidth:!0,fixPadding:!0,fixLinkTargets:!0,fixLinkShorten:!0,fixImageTitleAsLink:!0,onLoad:t=>t,onMount:t=>null,...n},e=(t,l)=>t.setHTML?t.setHTML(l):t.innerHTML=l;if(!i.selector)throw new Error("Selector must be specified");if(!i.url)throw new Error("URL must be specified");let o=typeof i.selector=="string"?document.querySelector(i.selector):i.selector;if(!o)throw new Error(`Cannot find selector "${i.selector} to embed GDoc`);return Promise.resolve().then(()=>i.fetcher(i)).then(t=>i.onLoad(t)).then(t=>c(t,n)).then(t=>o.replaceChildren(t))}
//# sourceMappingURL=embed-gdocs.cjs.map
